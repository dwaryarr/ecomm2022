<<UPDATE HAPUS PRODUCT>>
delimiter //
create trigger delete_product after delete
on products
for each row
begin
insert into products_delete
(id_produk,
kode_produk,
nama_produk,
gambar,
harga,
stok,
keterangan,
kategori,
tgl_hapus,
nama_user
)
values
(old.id_produk,
old.kode_produk,
old.nama_produk,
old.gambar,
old.harga,
old.stok,
old.keterangan,
old.kategori,
SYSDATE(),
current_user
);
end;//

<<UPDATE STOK PRODUCT (TERJUAL)>>
MariaDB [ecomm2022]> create trigger update_stokjual
    -> after insert on detail_order
    -> for each row
    -> begin
    -> update products
    -> set stok=stok-new.stok where id_produk=new.id_produk;
    -> end;//

<<UPDATE STOK PRODUCT (TAMBAH STOK)>>
MariaDB [ecomm2022]> create trigger update_tambahstok
    -> after insert on detail_order
    -> for each row
    -> begin
    -> update products
    -> set stok=stok+new.stok where id_produk=new.id_produk;
    -> end;//
